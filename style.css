:root {
  --easing: cubic-bezier(0.19, 1, 0.22, 1);
  /* Element Colors */
  --c-holz: #a0d468;
  --c-feuer: #f17e5d;
  --c-erde: #e2c38f;
  --c-metall: #c0c0c0;
  --c-wasser: #6ec1e4;
  --c-bg-default: #f5f3ef;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100dvw;
  /* Body height creates the scroll track, but visual content is fixed */
  min-height: 100dvh; 
  font-family: 'Inter', sans-serif;
  background-color: var(--c-bg-default);
  /* Ensure transition applies to background-color */
  transition: background-color 0.8s var(--easing);
  cursor: none;
  -webkit-tap-highlight-color: transparent;
  overflow-x: hidden;
}

/* 300vh height to allow scroll-driven question/hotspot reveal */
body { height: 300vh; }

/* When locked (hotspot active), prevent native scrolling */
body.locked { overflow: hidden; height: 100vh; }

/* --- Color Modes (Applied to Body) --- */
body.holz-mode { background-color: var(--c-holz); }
body.feuer-mode { background-color: var(--c-feuer); }
body.erde-mode { background-color: var(--c-erde); }
body.metall-mode { background-color: var(--c-metall); }
body.wasser-mode { background-color: var(--c-wasser); }

/* --- Noise Overlay --- */
.noise-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  pointer-events: none; z-index: 9000; opacity: 0.04;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

/* --- Media Layer --- */
.media-container {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  z-index: 5; pointer-events: none;
  /* IMPORTANT: Transparent so body color shows through initially */
  background: transparent; 
}

.bg-image {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  object-fit: cover; opacity: 0; transform: scale(1.1);
  filter: brightness(0.6) grayscale(0.2);
  transition: opacity 1s ease;
}
/* Active image fades in over the colored background */
.bg-image.active { opacity: 1; transform: scale(1); }

/* --- Viewport (FIXED) --- */
.viewport-fixed {
  position: fixed; /* Strictly fixed */
  top: 0; left: 0;
  width: 100dvw; height: 100dvh;
  z-index: 10; pointer-events: none;
}

/* --- Custom Cursor --- */
.custom-cursor {
  position: fixed; top: 0; left: 0;
  width: 10px; height: 10px; border-radius: 50%;
  background: #1a1a1a; pointer-events: none; z-index: 10000;
  transform: translate(-50%, -50%);
  mix-blend-mode: difference;
  display: flex; justify-content: center; align-items: center;
  transition: width 0.3s ease, height 0.3s ease, background-color 0.3s ease;
}

/* Colored Cursor States (Override difference mode) */
.custom-cursor.holz { background: var(--c-holz) !important; mix-blend-mode: normal; }
.custom-cursor.feuer { background: var(--c-feuer) !important; mix-blend-mode: normal; }
.custom-cursor.erde { background: var(--c-erde) !important; mix-blend-mode: normal; }
.custom-cursor.metall { background: var(--c-metall) !important; mix-blend-mode: normal; }
.custom-cursor.wasser { background: var(--c-wasser) !important; mix-blend-mode: normal; }

.custom-cursor.hover { width: 50px; height: 50px; }

/* Close Mode (X) */
.custom-cursor.close-mode {
  width: 60px; height: 60px;
  background: transparent !important;
  border: 1px solid rgba(255, 255, 255, 0.8);
  mix-blend-mode: normal;
}

/* On Word (Dot) */
.custom-cursor.on-word {
  width: 10px !important; height: 10px !important;
  background: #fff !important; border: none !important;
  mix-blend-mode: difference !important;
}

.cursor-icon { position: relative; width: 0; height: 0; opacity: 0; transition: opacity 0.2s; }
.custom-cursor.close-mode .cursor-icon { width: 20px; height: 20px; opacity: 1; }
.cursor-icon::before, .cursor-icon::after {
  content: ''; position: absolute; top: 50%; left: 0;
  width: 100%; height: 1px; background: #fff;
  transform: rotate(45deg);
}
.cursor-icon::after { transform: rotate(-45deg); }

/* --- Hotspots --- */
.hotspots-container { position: absolute; width: 100%; height: 100%; top: 0; left: 0; }

.hotspot {
  width: 100px; height: 100px; border-radius: 50%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.1);
  backdrop-filter: blur(5px);
  display: flex; justify-content: center; align-items: center;
  cursor: none; position: absolute; pointer-events: auto; z-index: 20; opacity: 0;
  filter: url(#liquid);
  transition: box-shadow 0.4s ease;
}

.hotspot .label {
  font-family: 'Space Mono', monospace; font-size: 0.8rem;
  text-transform: uppercase; letter-spacing: 0.1em;
  pointer-events: none; opacity: 0.6; color: #1a1a1a;
}

/* Colored Shadows */
.hotspot.holz:hover { box-shadow: 0 0 30px 5px rgba(160, 212, 104, 0.5); }
.hotspot.feuer:hover { box-shadow: 0 0 30px 5px rgba(241, 126, 93, 0.5); }
.hotspot.erde:hover { box-shadow: 0 0 30px 5px rgba(226, 195, 143, 0.5); }
.hotspot.metall:hover { box-shadow: 0 0 30px 5px rgba(192, 192, 192, 0.5); }
.hotspot.wasser:hover { box-shadow: 0 0 30px 5px rgba(110, 193, 228, 0.5); }

/* Active State */
.hotspot.active {
  z-index: 100;
  background: #fbfbfb !important;
  border: none; backdrop-filter: none;
  color: #1a1a1a !important;
  box-shadow: 0 30px 80px rgba(0,0,0,0.15);
}

/* Positions */
.holz { top: 50%; left: 15%; transform: translate(-50%, -50%); }
.feuer { top: 20%; left: 50%; transform: translate(-50%, -50%); }
.metall { top: 50%; right: 15%; transform: translate(50%, -50%); }
.wasser { bottom: 20%; left: 50%; transform: translate(-50%, 50%); }
.erde { top: 50%; left: 50%; transform: translate(-50%, -50%); }
.erde.active { top: 50% !important; left: 50% !important; transform: translate(-50%, -50%) !important; }

/* Question */
.question {
  position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);
  font-family: 'Inter', sans-serif; font-size: 2.5rem; font-weight: 300;
  letter-spacing: -0.02em; display: flex; overflow: hidden;
}
.char { display: inline-block; transform: translateY(100%); opacity: 0; }

/* Words */
.editorial-word {
  position: absolute; font-family: 'Inter', sans-serif; font-weight: 400;
  font-size: 3.5vw; line-height: 1; letter-spacing: -0.04em;
  z-index: 200; color: #ffffff; text-transform: uppercase;
  pointer-events: auto; cursor: none;
  clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
}
.editorial-word span { display: block; transform: translateY(110%); }
.editorial-word.dimmed { opacity: 0.3; transition: opacity 0.5s ease; }
.editorial-word.active-focus { opacity: 1; }